angular.module('starter.controllers',['ngStorage','ionic.cloud']).controller('getMobileCtrl',function($scope,$cordovaToast,$ionicModal,$rootScope,$http,$ionicPopup,$state,$timeout,$localStorage,$firebaseArray,$firebaseObject,$ionicSlideBoxDelegate,$ionicLoading){$http.get("datas/english.json").then(function(res){$localStorage.appdatas=res.data[0];$scope.getmobile=$localStorage.appdatas.getmobile;console.log("$localStorage.appdata",$localStorage.appdatas)});if($localStorage.guestdatanow==undefined){$localStorage.guestdatanow={}}
if($localStorage.appdatas){$scope.getmobile=$localStorage.appdatas.getmobile;console.log("$scope.getmobile",$scope.getmobile)}
$scope.getOTP=function(user){$ionicLoading.show();var datas={};datas.name=user.name;datas.email=user.email;datas.mobile=user.mobile;$localStorage.guestdatanow=datas;localStorage.setItem('logintest',!0);$state.go("getProfile");$ionicLoading.hide()}}).controller('getProfileCtrl',function($scope,$cordovaDevice,$ionicLoading,$ionicPopup,$filter,$state,$timeout,$localStorage,$firebaseArray,$firebaseObject,$ionicSlideBoxDelegate){$scope.getprofile=$localStorage.appdatas.aboutme;console.log("$scope.getprofile",$scope.getprofile);$scope.user={};$scope.currentDate=new Date();$scope.currentDate1=new Date();$scope.mydate=$scope.currentDate;$scope.minDate1=$filter('date')($scope.currentDate,"yyyy,MM,dd");$scope.minDate=new Date($scope.minDate1);console.log("$scope.minDate",$scope.minDate);var numberOfDaysToAdd=280;$scope.newdate=$scope.mydate.setDate($scope.mydate.getDate()+numberOfDaysToAdd);$scope.maxDate1=$filter('date')($scope.newdate,"yyyy,MM,dd");$scope.maxDate=new Date($scope.maxDate1);console.log("$scope.maxDate",$scope.maxDate);console.log("$scope.minDate",$scope.minDate);$scope.datePickerCallback=function(val){if(!val){console.log('Date not selected')}else{console.log('Selected date is : ',val);$scope.user.dob=val}};$scope.datePickerCallback1=function(val){if(!val){console.log('Date not selected')}else{console.log('Selected date is : ',val);$scope.user.duedate=val}};function toDate(dateString){var dateTokens=dateString.split('/');return new Date(dateTokens[2],parseInt(dateTokens[1])-1,dateTokens[0],0,0)}
$scope.getsin=function(data,image){$ionicLoading.show();console.log("getsin data",data);if(image){data.img=image.dataURL;$localStorage.guestdatanow.img=image.dataURL}
var today=new Date();var regdate=$filter('date')(today,'dd/MM/yyyy @ h:mma');$localStorage.regdate=regdate;console.log("guestdatanow",data.duedate);$scope.mydate=new Date(data.duedate);console.log("mydata",$scope.mydate);var numberOfDaysToAdd=280;$scope.newdate=$scope.mydate.setDate($scope.mydate.getDate()-numberOfDaysToAdd);console.log("$scope.newdate",$scope.newdate);var nowdate=$filter('date')($scope.newdate,'dd/MM/yyyy');data.pregnancydate=nowdate;$localStorage.guestdatanow.pregnancydate=data.pregnancydate;console.log("data.pregnancydate",data.pregnancydate);data.dob=$filter('date')(data.dob,'dd/MM/yyyy');data.duedate=$filter('date')(data.duedate,'dd/MM/yyyy');data.name=$localStorage.guestdatanow.name;data.mobile=$localStorage.guestdatanow.mobile;data.email=$localStorage.guestdatanow.email;$localStorage.allobabylogindata="guest";if(data.weight){data.weight=data.weight}
if(data.height){data.height=data.height}
$localStorage.guestdatanow=data;$localStorage.duedatebackup=data.duedate;console.log("$localStorage.guestdatanow",$localStorage.guestdatanow)
$localStorage.dobbackup=data.dob;$localStorage.guestdatanow.regdate=$localStorage.regdate;$localStorage.guestdatanow.device=ionic.Platform.device();var ref=firebase.database().ref("/patients");ref.push($localStorage.guestdatanow);var userref=firebase.database().ref("/patients");var userrefdata=$firebaseArray(userref);userrefdata.$loaded().then(function(){for(var i=0;i<userrefdata.length;i++){if(userrefdata[i].mobile==$localStorage.guestdatanow.mobile){$localStorage.guestfbid=userrefdata[i].$id;$localStorage.initialcheck=!0}}
$ionicLoading.hide();$state.go("app.today")})}}).controller('todayCtrl',function($scope,$anchorScroll,$location,$interval,$http,$rootScope,$cordovaCalendar,$ionicPopup,$filter,$ionicSideMenuDelegate,$http,$ionicModal,$filter,$ionicLoading,$state,$ionicModal,$timeout,$localStorage,$firebaseArray,$firebaseObject,$ionicScrollDelegate){$scope.open=function(url){window.open(url,'_blank','location=yes')}
if($localStorage.appdatas){$scope.today=$localStorage.appdatas.today;console.log("$scope.today",$scope.today)}
if($localStorage.allobabylogindata==undefined){$state.go("getMobile")}
$timeout(function(){$ionicScrollDelegate.scrollBottom()});function toDate(dateString){var dateTokens=dateString.split('/');return new Date(dateTokens[2],parseInt(dateTokens[1])-1,dateTokens[0],0,0)}
var todaydatenow=new Date();var filterdate=$filter('date')(todaydatenow,'dd/MM/yyyy');$scope.messageplaceholder="Say something mom...";$scope.setUpPushNotification=function(){document.addEventListener('deviceready',function(){cordova.plugins.notification.local.hasPermission(function(granted){if(granted==!1){cordova.plugins.notification.local.registerPermission(function(granted){console.log('registerPermission has been granted: '+granted)})}})},!1)};$scope.setUpPushNotification();if($localStorage.datetoday==undefined){var today=new Date();var date=$filter('date')(today,'dd/MM/yyyy');$localStorage.datetoday=date;$localStorage.pushdate=date;$localStorage.weeknotify=1}
if($localStorage.allobabylogindata=="guest"){$scope.diffInDays=function(){var today=new Date();var date=$filter('date')(today,"dd/MM/yyyy");var dt1=date.split('/'),dt2=$localStorage.guestdatanow.duedate.split('/'),one=new Date(dt1[2],dt1[1],dt1[0]),two=new Date(dt2[2],dt2[1],dt2[0]);var millisecondsPerDay=1000*60*60*24;var millisBetween=two.getTime()-one.getTime();var days=millisBetween/millisecondsPerDay;return Math.floor(days)};$scope.difftest=$scope.diffInDays();console.log("Date diff bw duedate &  currentDate",$scope.difftest);console.log("date check",parseInt($scope.difftest)<0);if(parseInt($scope.difftest)<0){$scope.mydate=new Date();$scope.mydate1=new Date();console.log("mydata1",$scope.mydate1);$localStorage.guestdatanow.pregnancydate=$filter('date')($scope.mydate1,'dd/MM/yyyy');console.log(" $localStorage.guestdatanow.pregnancydate ",$localStorage.guestdatanow.pregnancydate);var numberOfDaysToAdd=280;$scope.newdate=$scope.mydate.setDate($scope.mydate.getDate()+numberOfDaysToAdd);console.log("$scope.newdate",$scope.newdate);var nowdate=$filter('date')($scope.newdate,'dd/MM/yyyy');$localStorage.guestdatanow.duedate=nowdate;console.log("pregnancydate, duedate ",$localStorage.guestdatanow.pregnancydate,$localStorage.guestdatanow.duedate)}}
function toTime(timeString){var timeTokens=timeString.split(':');return new Date(1970,0,1,timeTokens[0],timeTokens[1])}
$interval(function(){$scope.weekschedule()},60000);$scope.weekschedule=function(){if($localStorage.week){if($localStorage.week!==$localStorage.weeknotify){console.log("weekschedule");$localStorage.weeknotify=$localStorage.week;var weekfbref=firebase.database().ref("/weeklyinfo");var weekfbdata=$firebaseArray(weekfbref);weekfbdata.$loaded().then(function(){for(var i=0;i<weekfbdata.length;i++){console.log("weekschedule for");if(weekfbdata[i].week==$localStorage.week){var weekfbref1=firebase.database().ref("/weeklyinfo/"+weekfbdata[i].$id);weekfbref1.child("currentweek").set(1)}
else{var weekfbref1=firebase.database().ref("/weeklyinfo/"+weekfbdata[i].$id);weekfbref1.child("currentweek").set(0)}}});var syfbref=firebase.database().ref("/symptoms");var syfbdata=$firebaseArray(syfbref);syfbdata.$loaded().then(function(){console.log("inside syfbref");for(var i=0;i<syfbdata.length;i++){console.log("symptoms for");if(syfbdata[i].week==$localStorage.week){var syfbref1=firebase.database().ref("/symptoms/"+syfbdata[i].$id);syfbref1.child("currentweek").set(1)}
else{var syfbref1=firebase.database().ref("/symptoms/"+syfbdata[i].$id);syfbref1.child("currentweek").set(0)}}});var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.weektitle,text:$localStorage.appdatas.notificationdata.weekdescription+$localStorage.week,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}}
var today1=new Date();var date1=$filter('date')(today1,'dd/MM/yyyy');var time=$filter('date')(today1,'HH');console.log("time",time,parseInt(time));if($localStorage.timefirst==undefined){$localStorage.timefirst=!0}
$scope.toggleLeftSideMenu=function(){$ionicSideMenuDelegate.toggleLeft()};if($localStorage.allobabylogindata=="guest"){$scope.guest=!0;$scope.pregnancydate=$localStorage.guestdatanow.pregnancydate;$scope.differenceInDays1=function(){var today=new Date();var date=$filter('date')(today,"dd/MM/yyyy");var dt1=date.split('/'),dt2=$scope.pregnancydate.split('/'),one=new Date(dt1[2],dt1[1],dt1[0]),two=new Date(dt2[2],dt2[1],dt2[0]);var millisecondsPerDay=1000*60*60*24;var millisBetween=one.getTime()-two.getTime();var days=millisBetween/millisecondsPerDay;return Math.floor(days)};$scope.diff1=$scope.differenceInDays1();$localStorage.daysback=$scope.diff1;console.log($scope.diff1);if($scope.diff1<=90){console.log("Inside 90");$scope.trimester="1";$localStorage.trimester=$scope.trimester}
else if($scope.diff1<=180){console.log("Inside 180");$scope.trimester="2";$localStorage.trimester=$scope.trimester}
else{console.log("Inside 270");$scope.trimester="3";$localStorage.trimester=$scope.trimester}
$scope.week=parseInt($scope.diff1/7)+1;$localStorage.week=$scope.week;if($localStorage.updateweek==undefined){console.log("inside updateweek");if($localStorage.week){console.log("inside if");var weekfbref=firebase.database().ref("/weeklyinfo");var weekfbdata=$firebaseArray(weekfbref);weekfbdata.$loaded().then(function(){console.log("weekfbdata",weekfbdata.length);$localStorage.updateweek=!0;for(var i=0;i<weekfbdata.length;i++){console.log("inside weekfbdata for");if(weekfbdata[i].week==$localStorage.week){var weekfbref1=firebase.database().ref("/weeklyinfo/"+weekfbdata[i].$id);weekfbref1.child("currentweek").set(1);console.log("weekfb set successfully")}
else{var weekfbref1=firebase.database().ref("/weeklyinfo/"+weekfbdata[i].$id);weekfbref1.child("currentweek").set(0)}}});console.log("symptoms for");var syfbref=firebase.database().ref("/symptoms");var syfbdata=$firebaseArray(syfbref);syfbdata.$loaded().then(function(){console.log("symptoms for");for(var i=0;i<syfbdata.length;i++){console.log("symptoms for");if(syfbdata[i].week==$localStorage.week){var syfbref1=firebase.database().ref("/symptoms/"+syfbdata[i].$id);syfbref1.child("currentweek").set(1)}
else{var syfbref1=firebase.database().ref("/symptoms/"+syfbdata[i].$id);syfbref1.child("currentweek").set(0)}}})}}
$scope.differenceInDays2=function(){var today=new Date();var date=$filter('date')(today,"dd/MM/yyyy");var dt1=date.split('/'),dt2=$localStorage.guestdatanow.duedate.split('/'),one=new Date(dt1[2],dt1[1],dt1[0]),two=new Date(dt2[2],dt2[1],dt2[0]);var millisecondsPerDay=1000*60*60*24;var millisBetween=two.getTime()-one.getTime();var days=millisBetween/millisecondsPerDay;return Math.floor(days)};$scope.diff2=$scope.differenceInDays2();$scope.futuremonth=parseInt($scope.diff2/30);var remind=parseInt($scope.diff2%30);$scope.futureweek=parseInt(remind/7);console.log("weeklyinfo fun");if(!$localStorage.weeklyinfo){$http.get("datas/weeklyinfo.json").then(function(res){$localStorage.weeklyinfo=res.data;$localStorage.weeklyinfostatus=!0;console.log("weeklyinfo from localStorage ",$localStorage.weeklyinfo);for(var i=0;i<$localStorage.weeklyinfo.length;i++){console.log("check week ",$localStorage.weeklyinfo[i].week,$localStorage.week);if($localStorage.weeklyinfo[i].week==$localStorage.week){$scope.weekdata=$localStorage.weeklyinfo[i];console.log("current week info",$scope.weekdata);break}}})}
else{console.log("weeklyinfo from localStorage - else ",$localStorage.weeklyinfo);for(var i=0;i<$localStorage.weeklyinfo.length;i++){console.log("check week ",$localStorage.weeklyinfo[i].week,$localStorage.week);if($localStorage.weeklyinfo[i].week==$localStorage.week){$scope.weekdata=$localStorage.weeklyinfo[i];console.log("current week info",$scope.weekdata);break}}}}
if($localStorage.chatdata==undefined){$http.get("datas/chat.json").then(function(res){console.log("res",res);$localStorage.chatdata=res.data[0].chat;$scope.datas=$localStorage.chatdata;console.log("$localStorage.chatdata",$localStorage.chatdata)})}
$scope.image="";$scope.viewimgicon=!1;console.log("$scope.viewimgicon",$scope.viewimgicon);if($localStorage.chatdata){$scope.datas=$localStorage.chatdata}
$scope.goback=function(){$state.go("app.today")}
if($localStorage.appdatas){$scope.today=$localStorage.appdatas.today;console.log("$scope.today",$scope.today)}
if($localStorage.tipscount==undefined){$localStorage.tipscount=0;console.log("$localStorage.tipscount",$localStorage.tipscount)}
if($localStorage.givetips==!0){$interval(function(){$scope.scheduletips()},1000000);$scope.scheduletips=function(){console.log("inside scheduletips");$http.get("datas/tips.json").then(function(res){var tipsdata=res.data;console.log("tipsdata",tipsdata);if($localStorage.tipscount==tipsdata.length){$localStorage.tipscount=0}
var tipscount=$localStorage.tipscount;$scope.tdata=tipsdata[tipscount].detail;console.log("tdata",$scope.tdata);var nowdata={"username":"Baby","time":date,"direction":"left","text":$scope.tdata,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata;$localStorage.tipscount=parseInt(tipscount)+1})}}
$scope.send=function(data1,image){$ionicScrollDelegate.scrollBottom();var today=new Date();var date=$filter('date')(today,'h:mma');var img="";$localStorage.temprepimg={};if($localStorage.guestdatanow.img){img=$localStorage.guestdatanow.img}
else{img="img/profile.png"}
console.log("$scope.weekdata",$scope.weekdata);if(image){console.log("inside if image");console.log("image",image);var repdatatext=data1.text;var nowdata={"username":$localStorage.guestdatanow.name,"time":date,"direction":"right","text":data1.text,"img":img,"repimg":image.dataURL};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata;$scope.viewimgicon=!1;$scope.messageplaceholder="Say something mom...";var nowdata={"username":"Baby","time":date,"direction":"left","text":"Your report saved","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata;$localStorage.checkupdatas=[];var datarep={};var newref1=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup");var newrefdata=$firebaseArray(newref1);newrefdata.$loaded().then(function(){console.log("newrefdata",newrefdata);console.log("newrefdata length",newrefdata.length);for(var i=0;i<newrefdata.length;i++){console.log("inside for");console.log("newrefdata[i]",newrefdata[i]);console.log("newrefdata[i].done == true",newrefdata[i].done==!0);if(newrefdata[i].done==!0){console.log("inside if");$localStorage.checkupdatas.push(newrefdata[i]);console.log("checkupdatas",$localStorage.checkupdatas)}}
var chdata=$localStorage.checkupdatas.length-1;console.log("chdata",chdata);var datacheckup=$localStorage.checkupdatas[chdata];console.log("datacheckup",datacheckup,datacheckup.$id);console.log("datacheckup id",datacheckup.$id);var cnewref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+datacheckup.$id+"/reports");datarep.file=image.dataURL;datarep.title=repdatatext;cnewref.push(datarep);console.log("checkupdatas push successfully")})}
else{var ldatas=data1.text;var ldata=ldatas.toLowerCase();var qdata=ldata.replace('?','');console.log("qdata",qdata);var data=qdata;var nowdata={"username":$localStorage.guestdatanow.name,"time":date,"direction":"right","text":data,"img":img};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata;var splitdata=data.split(' ');console.log("splitdata",splitdata);var casevar;var weekno;$scope.parameter;var tipsvar;for(var i=0;i<splitdata.length;i++){if(splitdata[i]=="week"||splitdata[i]=="weekly"||splitdata[i]=="weeklyinfo"||splitdata[i]=="weeklyinformation"||splitdata[i]=="weeklydata"||splitdata[i]=="weekinformation"||splitdata[i]=="weekinfo"||splitdata[i]=="weekdata"||splitdata[i]=="weekbyweek"){casevar="weekinfo";for(var j=0;j<splitdata.length;j++){if(splitdata[j]=="length"){$scope.parameter="length"}
else if(splitdata[j]=="size"){$scope.parameter="size"}
else if((splitdata[j]=="symptoms")||(splitdata[j]=="symptoms")){$scope.parameter="symptoms"}
else if(splitdata[j]=="tips"){$scope.parameter="tips"}
else if(splitdata[j]=="1"){weekno="1"}
else if(splitdata[j]=="2"){weekno="2"}
else if(splitdata[j]=="3"){weekno="3"}
else if(splitdata[j]=="4"){weekno="4"}
else if(splitdata[j]=="5"){weekno="5"}
else if(splitdata[j]=="6"){weekno="6"}
else if(splitdata[j]=="7"){weekno="7"}
else if(splitdata[j]=="8"){weekno="8"}
else if(splitdata[j]=="9"){weekno="9"}
else if(splitdata[j]=="10"){weekno="10"}
else if(splitdata[j]=="11"){weekno="11"}
else if(splitdata[j]=="12"){weekno="12"}
else if(splitdata[j]=="13"){weekno="13"}
else if(splitdata[j]=="14"){weekno="14"}
else if(splitdata[j]=="15"){weekno="15"}
else if(splitdata[j]=="16"){weekno="16"}
else if(splitdata[j]=="17"){weekno="17"}
else if(splitdata[j]=="18"){weekno="18"}
else if(splitdata[j]=="19"){weekno="19"}
else if(splitdata[j]=="20"){weekno="20"}
else if(splitdata[j]=="21"){weekno="21"}
else if(splitdata[j]=="22"){weekno="22"}
else if(splitdata[j]=="23"){weekno="23"}
else if(splitdata[j]=="24"){weekno="24"}
else if(splitdata[j]=="25"){weekno="25"}
else if(splitdata[j]=="26"){weekno="26"}
else if(splitdata[j]=="27"){weekno="27"}
else if(splitdata[j]=="28"){weekno="28"}
else if(splitdata[j]=="29"){weekno="29"}
else if(splitdata[j]=="30"){weekno="30"}
else if(splitdata[j]=="31"){weekno="31"}
else if(splitdata[j]=="32"){weekno="32"}
else if(splitdata[j]=="33"){weekno="33"}
else if(splitdata[j]=="34"){weekno="34"}
else if(splitdata[j]=="35"){weekno="35"}
else if(splitdata[j]=="36"){weekno="36"}
else if(splitdata[j]=="37"){weekno="37"}
else if(splitdata[j]=="38"){weekno="38"}
else if(splitdata[j]=="39"){weekno="39"}
else if(splitdata[j]=="40"){weekno="40"}}}
if(splitdata[i]=="tips"){tipsvar="tips"}}
if(casevar=="weekinfo"){console.log("inside weekinfo",weekno);if(weekno==null){weekno=$localStorage.week;$http.get("datas/weeklyinfo.json").then(function(res){var datas=res.data;var momdata;for(var i=0;i<datas.length;i++){console.log("inside for");if(datas[i].week==weekno){console.log("inside if",datas[i]);momdata=datas[i]}}
if(data=="what has happened in this week"||data=="what will happen in this week"||data=="What is happening in this week"||data=="tell me more about what is happening to me in this week"||data=="what has happened in this week?"||data=="what will happen in this week?"||data=="What is happening in this week?"||data=="tell me more about what is happening to me in this week?"){var nowdata={"username":"Baby","time":date,"direction":"left","text":momdata.yourbody,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="how is baby development this week"||data=="how is my baby developing this week"||data=="how is my baby development this week"||data=="tell me more about my baby's growth this week"||data=="how is my baby growing this week"||data=="what is the growing of baby this week"||data=="my baby growth this week"||data=="how is my baby growing this week"||data=="how is my baby growth this week"||data=="how is baby development this week?"||data=="how is my baby developing this week?"||data=="how is my baby development this week?"||data=="tell me more about my baby's growth this week?"||data=="how is my baby growing this week?"||data=="what is the growing of baby this week?"||data=="my baby growth this week?"||data=="how is my baby growing this week?"||data=="how is my baby growth this week?"){var nowdata={"username":"Baby","time":date,"direction":"left","text":momdata.babydevelopment,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if($scope.parameter=="length"){console.log("momdata.length",momdata.length);if(momdata.length==""){var textnow="Your baby length is equal to"+momdata.babysize;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else{var textnow="Your baby length is "+momdata.length;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}}
else if($scope.parameter=="size"){var textnow="Your baby size is "+momdata.babysize;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg","extraimg":momdata.babydevelopmentimage};console.log("babydevelopmentimage",momdata.babydevelopmentimage);$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if($scope.parameter=="tips"){var textnow="Staying active is a must for most moms to be. Regular exercise will help you control your weight, improve circulation, boost your mood, and help you sleep better. Plus, getting into an exercise habit now will help you set a good example for your child after born."
var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if($scope.parameter=="symptoms"){var textnow="Common symptoms like nausea, vomiting and fatigue, constipation, tender breasts,mood swings, morning sickness, and hormonal changes."
var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else{var textnow="Mom you are in week "+weekno+" Your baby size is "+momdata.babysize;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}})}
else{var ref=firebase.database().ref("/weeklyinfo");var datas=$firebaseArray(ref);datas.$loaded().then(function(){var momdata;console.log("$scope.parameter",$scope.parameter);for(var i=0;i<datas.length;i++){if(datas[i].week==weekno){momdata=datas[i]}}
console.log("weekno",weekno);if(data=="what has happened in week "+weekno||data=="what will happen in this week "+weekno||data=="what is happening in week "+weekno||data=="tell me more about what is happening to me in week "+weekno){var nowdata={"username":"Baby","time":date,"direction":"left","text":momdata.yourbody,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="how is my baby developing in week "+weekno||data=="tell me more about my baby's growth in week "+weekno||data=="how is my baby growing in week "+weekno||data=="how is baby development in week "+weekno){var nowdata={"username":"Baby","time":date,"direction":"left","text":momdata.babydevelopment,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if($scope.parameter=="length"){console.log("momdata.length",momdata.length);if(momdata.length==""){var textnow="Your baby length is equal to"+momdata.babysize;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else{var textnow="Your baby length is "+momdata.length;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}}
else if($scope.parameter=="size"){var textnow="Your baby size is "+momdata.babysize;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg","extraimg":momdata.babydevelopmentimage};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if($scope.parameter=="symptoms"||$scope.parameter=="symptom"){console.log("symptoms inside week");$http.get("datas/symptoms.json").then(function(res){var sdata1=res.data;var sflag=!1;for(var i=0;i<sdata1.length;i++){console.log("inside sdata for");if(sdata1[i].week==weekno){console.log("inside if sdata1",sdata1[i]);sdata=sdata1[i].sydata;console.log("sydata",sdata);sflag=!0}}
if(sflag==!1){sdata="Common symptoms like nausea, vomiting and fatigue, constipation, tender breasts,mood swings, morning sickness, and hormonal changes."}
console.log("sydata",sdata);var nowdata={"username":"Baby","time":date,"direction":"left","text":sdata,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata})}
else{var textnow="Mom you are in week "+weekno+" Your baby size is "+momdata.babysize;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}})}}
else if(tipsvar=="tips"){var data="Staying active is a must for most moms to be. Regular exercise will help you control your weight, improve circulation, boost your mood, and help you sleep better. Plus, getting into an exercise habit now will help you set a good example for your child after born."
var nowdata={"username":"Baby","time":date,"direction":"left","text":data,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="hi"||data=="hello"||data=="hai"||data=="hallo"||data=="hi baby"|data=="hello baby"||data=="hai baby"){var nowdata={"username":"Baby","time":date,"direction":"left","text":"How are you feel today?","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="good"||data=="fine"||data=="happy"||data=="yeah good"||data=="yeah fine"||data=="tired"||data=="sad"||data=="i am feeling good"||data=="i am feeling happy"||data=="i feel happy"||data=="i feel tired"||data=="i feel good"||data=="bad"||data=="feeling vomiting"){console.log("inside if data",data);var nowdata={"username":"Baby","time":date,"direction":"left","text":"Would you like to know about your Baby's growth today?","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="yes"||data=="yeah"||data=="ok"||data=="hm"||data=="hmm"||data=="hmmm"||data=="hm ok"||data=="yeah sure"||data=="sure"||data=="yeah ok"||data=="i want to know"){console.log("inside if1 data",data);for(var i=0;i<$localStorage.weeklyinfo.length;i++){console.log("check week ",$localStorage.weeklyinfo[i].week,$localStorage.week);if($localStorage.weeklyinfo[i].week==$localStorage.week){$scope.weekdata=$localStorage.weeklyinfo[i];console.log("current week info",$scope.weekdata);var nowdata={"username":"Baby","time":date,"direction":"left","text":$scope.weekdata.babydevelopment,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata;break}}}
else if(data=="no"||data=="notnow"){console.log("inside if2 data",data);var nowdata={"username":"Baby","time":date,"direction":"left","text":"Ask me anything I will Be happy to assist you","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="thanks"||data=="thank you"||data=="thanks baby"){console.log("inside if2 data",data);var nowdata={"username":"Baby","time":date,"direction":"left","text":"Welcome Mom","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="pregnancy symptoms"||data=="pregnency symptoms"||data=="symptoms"||data=="is vomiting a normal symptom during pregnancy?"||data=="symptom"||data=="can you say symptoms for this month"||data=="can you say symptoms for this month?"||data=="could you say symptoms for this month"||data=="could you say symptoms for this month?"||data=="give some symptoms for me"||data=="give symptoms for me"||data=="tell me about symptoms"||data=="symptoms for me"||data=="symptom for me"){console.log("inside symptoms else");$http.get("datas/symptoms.json").then(function(res){var sdata1=res.data;var sflag=!1;for(var i=0;i<sdata1.length;i++){console.log("inside sdata for");if(sdata1[i].week==$localStorage.week){console.log("inside if sdata1",sdata1[i]);sdata=sdata1[i].sydata;console.log("sydata",sdata);sflag=!0}}
if(sflag==!1){sdata="Common symptoms like nausea, vomiting and fatigue, constipation, tender breasts,mood swings, morning sickness, and hormonal changes."}
console.log("sydata",sdata);var nowdata={"username":"Baby","time":date,"direction":"left","text":sdata,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata})}
else if(data=="set my checkup date"||data=="can you set my checkup date"||data=="can you set my checkup date?"||data=="set my checkup"){$scope.setmycheckup=!0;console.log("inside set my checkup");var nowdata={"username":"Baby","time":date,"direction":"left","text":"Send checkup date","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if($scope.setmycheckup==!0){console.log("inside set my checkup = true",data);$localStorage.checkupdate=data;console.log("$localStorage.chatchekup.date",$localStorage.checkupdate);$scope.setmycheckup=!1;var nowdata={"username":"Baby","time":date,"direction":"left","text":"Checkup date set successfully","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="set my checkup time"||data=="can you set my checkup time"){$scope.setmycheckuptime=!0;console.log("inside set my checkup");var nowdata={"username":"Baby","time":date,"direction":"left","text":" Send Checkup time","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if($scope.setmycheckuptime==!0){console.log("inside set my checkuptime = true");$localStorage.chatchekup.time=data;$localStorage.checkuptime=data;console.log("$localStorage.chatchekup.time",$localStorage.checkuptime);$scope.setmycheckuptime=!1;var nowdata={"username":"Baby","time":date,"direction":"left","text":"Checkup time set successfully","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="save my report"||data=="add my report"||data=="include my report"||data=="can you add my report"||data=="can you add my report?"||data=="could you add my report"||data=="could you add my report?"||data=="i want to add my report"||data=="i want to save my report"){console.log("save my report");var newref1=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup");var newrefdata=$firebaseArray(newref1);newrefdata.$loaded().then(function(){console.log("newrefdata",newrefdata);console.log("newrefdata length",newrefdata.length);var testcheckupdatas=[];for(var i=0;i<newrefdata.length;i++){console.log("inside for");console.log("newrefdata[i]",newrefdata[i]);console.log("newrefdata[i].done == true",newrefdata[i].done==!0);if(newrefdata[i].done==!0){console.log("inside if");testcheckupdatas.push(newrefdata[i]);console.log("testcheckupdatas",testcheckupdatas)}}
console.log("testcheckupdatas",testcheckupdatas.length);if(testcheckupdatas.length===0){var nowdata={"username":"Baby","time":date,"direction":"left","text":"Sorry Mom there is no checkup added yet","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else{$scope.viewimgicon=!0;$scope.messageplaceholder="Enter Report Name";var nowdata={"username":"Baby","time":date,"direction":"left","text":"Send your report with name","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}})}
else if(data=="send my report"||data=="can you send my report"||data=="can you send my report?"||data=="could you send my report"||data=="could you send my report?"){var nowdata={"username":"Baby","time":date,"direction":"left","text":"Mom, You can view your report in checkup info page","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="how is baby development"||data=="how is my baby developing"||data=="how is my baby development"||data=="tell me more about my baby's growth"||data=="how is my baby growing this week"||data=="what is the growing of baby"||data=="my baby growth"||data=="how is my baby growing"||data=="how is my baby growth"||data=="how is baby development?"||data=="how is my baby developing?"||data=="how is my baby development>"||data=="tell me more about my baby's growth?"||data=="how is my baby growing this week?"||data=="what is the growing of baby?"||data=="my baby growth?"||data=="how is my baby growing?"||data=="how is my baby growth?"){console.log("$scope.weekdata",$scope.weekdata);var nowdata={"username":"Baby","time":date,"direction":"left","text":$scope.weekdata.babydevelopment,"img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else if(data=="size of my baby"||data=="size of baby"||data=="baby size"||data=="what is the size of baby"||data=="what is the size of  my baby"||data=="what is the size of baby?"||data=="what is the size of  my baby?"){var textnow=" baby size is "+$scope.weekdata.babysize;var nowdata={"username":"Baby","time":date,"direction":"left","text":textnow,"img":"img/babies.jpg","extraimg":$scope.weekdata.babydevelopmentimage};console.log("babydevelopmentimage",$scope.weekdata.babydevelopmentimage);$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}
else{console.log("inside if3 data",data);var nowdata={"username":"Baby","time":date,"direction":"left","text":"Sorry! Mom, I can't able to understand","img":"img/babies.jpg"};$localStorage.chatdata.push(nowdata);$scope.datas=$localStorage.chatdata}}
data1.text="";document.getElementById("reportimage").value="";$scope.image=""}}).controller('weeklyinfoCtrl',function($scope,$cordovaToast,$state,$timeout,$ionicLoading,$localStorage,$stateParams,$ionicPopover,$firebaseArray,$window,$ionicHistory,$ionicSlideBoxDelegate,$http,$firebaseObject){console.log("weeklyinfoCtrl");$scope.weeklyinfo=$localStorage.appdatas.weeklyinfo;console.log("$scope.weeklyinfo",$scope.weeklyinfo);$scope.Height=$window.innerHeight-30;$scope.weekdatas=$localStorage.weeklyinfo;$scope.wdatas=$localStorage.weeklyinfo;console.log("weeklyinfo from localStorage ",$scope.wdatas);for(var i=0;i<$scope.wdatas.length;i++){console.log("check week ",$scope.wdatas[i].week,$localStorage.week);if($scope.wdatas[i].week==$localStorage.week){$scope.weekdata=$scope.wdatas[i];console.log("current week info",$scope.weekdata);break}}
$ionicPopover.fromTemplateUrl('templates/popover.html',{scope:$scope,}).then(function(popover){$scope.popover=popover});$scope.gotoweekinfo=function(){$state.go("app.weeklyinfo");$ionicSlideBoxDelegate.update();$scope.popover.hide()}
$scope.gotoweekinfos=function(data){$scope.popover.hide();$state.go("app.weeklyinfos",{week:data});$ionicSlideBoxDelegate.update()}
$scope.setPlatform=function(p){console.log("p",p);document.body.classList.remove('platform-android');document.body.classList.add('platform-android'+p);$scope.demo=p}}).controller('weeklyinfosCtrl',function($scope,$cordovaToast,$state,$window,$ionicLoading,$timeout,$stateParams,$ionicHistory,$localStorage,$ionicPopover,$firebaseArray,$ionicPopover,$ionicSlideBoxDelegate,$firebaseObject){$scope.weeklyinfo=$localStorage.appdatas.weeklyinfo;console.log("$scope.weeklyinfo",$scope.weeklyinfo);$scope.Height=$window.innerHeight-30;$ionicPopover.fromTemplateUrl('templates/popover.html',{scope:$scope,}).then(function(popover){$scope.popover=popover});$scope.gotoweekinfo=function(){$state.go("app.weeklyinfo");$ionicSlideBoxDelegate.update();$scope.popover.hide()}
$scope.gotoweekinfos=function(data){$scope.popover.hide();$state.go("app.weeklyinfos",{week:data});$ionicSlideBoxDelegate.update()}
console.log("weeklyinfosCtrl");console.log("stateParams",$stateParams.week);$scope.weekdatas=$localStorage.weeklyinfo;console.log("weeklyinfodata",$scope.weekdatas);console.log("weeklyinfodata",$scope.weekdatas.length);for(var i=0;i<$scope.weekdatas.length;i++){if($scope.weekdatas[i].week==$stateParams.week){console.log("check week ",$scope.weekdatas[i].week,$stateParams.week);$scope.weekdata=$scope.weekdatas[i];console.log("current week info",$scope.weekdata);console.log("current week test info",$scope.weekdata.sdtest);break}}}).controller('checkupCtrl',function($scope,$cordovaCamera,$cordovaToast,$ionicPopup,$ionicSideMenuDelegate,$filter,$ionicLoading,$state,$ionicModal,$timeout,$localStorage,$firebaseArray,$firebaseObject,$interval){$scope.checkupinfodata=$localStorage.appdatas.checkupinfo;$scope.upcomingdata=$localStorage.appdatas.checkupinfo.upcoming;$scope.completeddata=$localStorage.appdatas.checkupinfo.completed;console.log("$scope.checkupinfodata",$scope.checkupinfodata);$scope.toggleLeftSideMenu=function(){$ionicSideMenuDelegate.toggleLeft()};$localStorage.imagereport={};function toDate(dateString){var dateTokens=dateString.split('/');return new Date(dateTokens[2],parseInt(dateTokens[1])-1,dateTokens[0],0,0)}
function toTime(timeString){var timeTokens=timeString.split(':');return new Date(0,0,0,timeTokens[0],timeTokens[1])}
$scope.datePickerCallback1=function(val){if(!val){console.log('Date not selected')}else{console.log('Selected date is : ',val);$scope.checkupdate=val;var newvaldata=$filter('date')(val,'dd/MM/yyyy')}}
$ionicModal.fromTemplateUrl('templates/checkup/checkupset.html',{scope:$scope,animation:'slide-in-up'}).then(function(modal){$scope.modal1=modal});$scope.openModal1=function(){$scope.checkupsetdata=$localStorage.appdatas.checkupinfo.upcoming.checkupset;$scope.modal1.show()};$scope.closeModal1=function(){$scope.modal1.hide()};$scope.checkupdate1=new Date();console.log("Checkup date test",$scope.checkupdate);var numberOfDaysToAdd=1;$scope.newdate=new Date($scope.checkupdate1.setDate($scope.checkupdate1.getDate()+numberOfDaysToAdd));$scope.minDate1=$filter('date')($scope.newdate,"yyyy,MM,dd");$scope.minDate=new Date($scope.minDate1);console.log("$scope.newdate",$scope.newdate);$scope.checkupdate=$scope.newdate;if($localStorage.checkuptime!=undefined){$scope.checkuptime=$localStorage.checkuptime}
$scope.setcheckup=function(data,data1){if($localStorage.guestfbid!=undefined){console.log("time",data1);$localStorage.showcheckup=!0;$localStorage.rawdate=data;$localStorage.checkupdate=$filter('date')(data,'dd/MM/yyyy');$localStorage.checkuptime=$filter('date')(data1,'HH:mm');console.log("time",data1);var timeshow=$filter('date')(data1,'h:mma');$scope.showdata=$localStorage.showcheckup;var datas={};datas.checkupdate=$localStorage.checkupdate;datas.checkuptime=$localStorage.checkuptime;datas.done=!1;var newlink=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup");var checkupdata=$firebaseArray(newlink);checkupdata.$loaded().then(function(){var checkupsetflag=!1;for(var i=0;i<checkupdata.length;i++){if(checkupdata[i].checkupdate==datas.checkupdate){if(checkupdata[i].done==!0){$state.go("app.checkup");checkupsetflag=!0;$scope.dataget()}
else{var checkupref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+checkupdata[i].$id);checkupref.child("checkupdate").set(datas.checkupdate);checkupref.child("checkuptime").set(datas.checkuptime);checkupref.child("done").set(!1);checkupsetflag=!0;$scope.dataget()}}}
if(checkupsetflag==!1){newlink.push(datas);$scope.dataget()}});$scope.modal1.hide()}
else{$cordovaToast.show($localStorage.appdatas.notificationdata.trylater,'long','center').then(function(success){},function(error){})}}
$scope.done=function(data){if($localStorage.guestfbid!=undefined){console.log("appointment data",data,"checkupdate",data.checkupdate);var ref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+data.$id);ref.child("done").set(!0);$scope.dataget()}}
$scope.dataget=function(){var ref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup");var datas=$firebaseArray(ref);console.log(datas);$ionicLoading.show();$scope.datas=[];datas.$loaded().then(function(){$ionicLoading.hide();$scope.testflag=!1;$scope.testflag1=!1;for(var i=0;i<datas.length;i++){var test=toTime(datas[i].checkuptime);datas[i].checkuptime=$filter('date')(test,'h:mma');var d=datas[i].checkupdate.split("/");datas[i].day=d[0];datas[i].month1=d[1];datas[i].year=d[2];switch(datas[i].month1){case "1":datas[i].month="Jan";break;case "2":datas[i].month="Feb";break;case "3":datas[i].month="Mar";break;case "4":datas[i].month="Apr";break;case "5":datas[i].month="May";break;case "6":datas[i].month="Jun";break;case "7":datas[i].month="Jul";break;case "8":datas[i].month="Aug";break;case "9":datas[i].month="Sep";break;case "01":datas[i].month="Jan";break;case "02":datas[i].month="Feb";break;case "03":datas[i].month="Mar";break;case "04":datas[i].month="Apr";break;case "05":datas[i].month="May";break;case "06":datas[i].month="Jun";break;case "07":datas[i].month="Jul";break;case "08":datas[i].month="Aug";break;case "09":datas[i].month="Sep";break;case "10":datas[i].month="Oct";break;case "11":datas[i].month="Nov";break;case "12":datas[i].month="Dec";break}
$scope.datas=datas;if(datas[i].done==!0){$scope.testflag=!0}
if(datas[i].done==!1){$scope.testflag1=!0}}})}
$scope.add=function(notes){if($localStorage.guestfbid!=undefined){console.log("inside add");var data={};var ref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$localStorage.notesfbid+"/reports");if($localStorage.imagereport!=""||$localStorage.imagereport!=null){console.log("inside if img",$localStorage.imagereport.dataURL);data.image=$localStorage.imagereport.dataURL}
if(notes){data.notes=notes}
ref.push(data);$scope.dataget();$scope.closeModal2()}
else{$cordovaToast.show($localStorage.appdatas.notificationdata.trylater,'long','center').then(function(success){},function(error){})}}
$interval(function(){$scope.schedulecheckup()},60000);$scope.schedulecheckup=function(){console.log("inside schedulecheckup");var checkref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup");var checkrefdata=$firebaseArray(checkref);checkrefdata.$loaded().then(function(){var testdisp=!1;for(var i=0;i<checkrefdata.length;i++){console.log("checkrefdata[i].done != true",checkrefdata[i].done!=!0);if(checkrefdata[i].done!=!0){console.log("inside if");$scope.diffInDays=function(){var today=new Date();var date=$filter('date')(today,"dd/MM/yyyy");var dt1=date.split('/'),dt2=checkrefdata[i].checkupdate.split('/'),one=new Date(dt1[2],dt1[1],dt1[0]),two=new Date(dt2[2],dt2[1],dt2[0]);var millisecondsPerDay=1000*60*60*24;var millisBetween=two.getTime()-one.getTime();var days=millisBetween/millisecondsPerDay;return Math.floor(days)};$scope.difftestnow=$scope.diffInDays();console.log("$scope.difftestnow < 0",$scope.difftestnow<0);if($scope.difftestnow<0){console.log("inside if");testdisp=!0;var cref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+checkrefdata[i].$id);cref.child('done').set(!0);$scope.dataget()}}}})}
if($localStorage.guestfbid!=undefined){var ref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup");var datas=$firebaseArray(ref);console.log(datas);$ionicLoading.show();$scope.datas=[];datas.$loaded().then(function(){$ionicLoading.hide();$scope.testflag=!1;$scope.testflag1=!1;for(var i=0;i<datas.length;i++){var test=toTime(datas[i].checkuptime);datas[i].checkuptime=$filter('date')(test,'h:mma');var d=datas[i].checkupdate.split("/");datas[i].day=d[0];datas[i].month1=d[1];datas[i].year=d[2];switch(datas[i].month1){case "1":datas[i].month="Jan";break;case "2":datas[i].month="Feb";break;case "3":datas[i].month="Mar";break;case "4":datas[i].month="Apr";break;case "5":datas[i].month="May";break;case "6":datas[i].month="Jun";break;case "7":datas[i].month="Jul";break;case "8":datas[i].month="Aug";break;case "9":datas[i].month="Sep";break;case "01":datas[i].month="Jan";break;case "02":datas[i].month="Feb";break;case "03":datas[i].month="Mar";break;case "04":datas[i].month="Apr";break;case "05":datas[i].month="May";break;case "06":datas[i].month="Jun";break;case "07":datas[i].month="Jul";break;case "08":datas[i].month="Aug";break;case "09":datas[i].month="Sep";break;case "10":datas[i].month="Oct";break;case "11":datas[i].month="Nov";break;case "12":datas[i].month="Dec";break}
$scope.datas=datas;if(datas[i].done==!0){$scope.testflag=!0}
if(datas[i].done==!1){$scope.testflag1=!0}}})}
else{$cordovaToast.show($localStorage.appdatas.notificationdata.trylater,'long','center').then(function(success){},function(error){})}}).controller('checkupdetailCtrl',function($scope,$ionicActionSheet,$cordovaToast,$cordovaFileTransfer,$rootScope,$cordovaCamera,$ionicHistory,$ionicPopup,$ionicSideMenuDelegate,$filter,$ionicLoading,$state,$ionicModal,$timeout,$localStorage,$firebaseArray,$firebaseObject,$stateParams,$ionicPopover,$interval){$scope.checkupdetaildata=$localStorage.appdatas.checkupinfo.completed.checkupdetails;$scope.report={};$scope.scan={};$scope.image=null;$scope.goback=function(){$ionicHistory.goBack()}
var scanref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$stateParams.date+"/reports");$scope.scandata=$firebaseArray(scanref);$scope.scandata.$loaded().then(function(){$scope.scandata=$scope.scandata;console.log("$scope.scandata",$scope.scandata)});function toTime(timeString){var timeTokens=timeString.split(':');return new Date(0,0,0,timeTokens[0],timeTokens[1])}
$ionicModal.fromTemplateUrl('templates/checkup/editnotes.html',{scope:$scope,animation:'slide-in-up'}).then(function(modal){$scope.modal1=modal});$scope.openModal1=function(data){$scope.editcheckupdata=$localStorage.appdatas.checkupinfo.completed.editcheckupdetails;$scope.modal1.show();console.log("report data",data);$scope.report.notes=data.notes;$scope.report.doctorname=data.doctorname};$scope.closeModal1=function(){$scope.modal1.hide()};$ionicModal.fromTemplateUrl('templates/checkup/addnotes.html',{scope:$scope,animation:'slide-in-up'}).then(function(modal){$scope.modal2=modal});$scope.openModal2=function(){$scope.addnotesdata=$localStorage.appdatas.checkupinfo.completed.addnotes;$scope.modal2.show()};$scope.closeModal2=function(){$scope.report.notes="";$scope.report.doctorname="";$scope.modal2.hide()};$ionicLoading.show();$localStorage.nowreportdate=$stateParams.date;var ref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$stateParams.date);var data=$firebaseObject(ref);data.$loaded().then(function(){$scope.data=data;var time=toTime($scope.data.checkuptime);$scope.data.checkuptime=$filter('date')(time,'h:mma');$ionicLoading.hide()});$timeout(function(){$ionicLoading.hide()},5000);$scope.add=function(){if($localStorage.guestfbid!=undefined){console.log("inside add",$scope.data.notes);var data={};var ref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$stateParams.date);if($scope.data.notes){data.notes=$scope.data.notes;ref.child("notes").set($scope.data.notes)}
$scope.data=$firebaseObject(ref);$cordovaToast.show($localStorage.appdatas.notificationdata.added,'long','center').then(function(success){},function(error){})}}
$scope.remove=function(item){if($localStorage.guestfbid!=undefined){var delref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$stateParams.date+"/reports/"+item.$id);$ionicPopup.confirm({title:$localStorage.appdatas.notificationdata.confirmation,template:$localStorage.appdatas.notificationdata.deletetext,buttons:[{text:$localStorage.appdatas.notificationdata.yes,type:'button-positive',onTap:function(){delref.set({})}},{text:$localStorage.appdatas.notificationdata.no,type:'button-stable',onTap:function(){}}]})}}
var scanref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$stateParams.date+"/reports");$scope.scandata=$firebaseArray(scanref);$scope.scandata.$loaded().then(function(){console.log("$scope.scandata",$scope.scandata)});$scope.addscan=function(datas,image){if($localStorage.guestfbid!=undefined){var data={};var scanref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$stateParams.date+"/reports");if(datas.title){data.title=datas.title}
if(image){data.file=image.dataURL}
scanref.push(data);$scope.scan.title="";$scope.image=null;$scope.closeModal3()}}
$ionicModal.fromTemplateUrl('templates/checkup/addreport.html',{scope:$scope,animation:'slide-in-up'}).then(function(modal){$scope.modal3=modal});$scope.openModal3=function(){$scope.addreportdata=$localStorage.appdatas.checkupinfo.completed.addreport;console.log("image",$scope.image);$scope.modal3.show()};$scope.closeModal3=function(){$scope.scan.title="";$scope.image=null;console.log("image",$scope.image);document.getElementById("filesample").value="";$scope.modal3.hide()}}).controller('reportCtrl',function($scope,$ionicActionSheet,$cordovaToast,$cordovaFileTransfer,$rootScope,$cordovaCamera,$ionicHistory,$ionicPopup,$ionicSideMenuDelegate,$filter,$ionicLoading,$state,$ionicModal,$timeout,$localStorage,$firebaseArray,$firebaseObject,$stateParams,$ionicPopover,$interval){$scope.scan={};$scope.image=null;$scope.addreportdata=$localStorage.appdatas.checkupinfo.completed.addreport;$scope.goback=function(){$ionicHistory.goBack()}
function toTime(timeString){var timeTokens=timeString.split(':');return new Date(0,0,0,timeTokens[0],timeTokens[1])}
$scope.remove=function(item){if($localStorage.guestfbid!=undefined){var delref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$localStorage.nowreportdate+"/reports/"+item.$id);$ionicPopup.confirm({title:$localStorage.appdatas.notificationdata.confirmation,template:$localStorage.appdatas.notificationdata.deletetext,buttons:[{text:$localStorage.appdatas.notificationdata.yes,type:'button-positive',onTap:function(){delref.set({})}},{text:$localStorage.appdatas.notificationdata.no,type:'button-stable',onTap:function(){}}]})}}
var scanref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$localStorage.nowreportdate+"/reports");$scope.scandata=$firebaseArray(scanref);$scope.scandata.$loaded().then(function(){console.log("$scope.scandata",$scope.scandata)});$scope.addscan=function(datas,image){if($localStorage.guestfbid!=undefined){var data={};var scanref=firebase.database().ref("/patients/"+$localStorage.guestfbid+"/checkup/"+$localStorage.nowreportdate+"/reports");if(datas.title){data.title=datas.title}
if(image){data.file=image.dataURL}
scanref.push(data);$scope.scan.title="";$scope.image=null;console.log("image",$scope.image);document.getElementById("filesample").value="";$localStorage.nowreportdate="";$ionicHistory.goBack()}}}).controller('profileCtrl',function($scope,$cordovaCamera,$rootScope,$interval,$ionicPopup,$ionicSideMenuDelegate,$http,$ionicModal,$filter,$ionicLoading,$state,$ionicModal,$timeout,$localStorage,$firebaseArray,$firebaseObject,$cordovaToast){console.log("inside profileCtrl");$scope.profiledata=$localStorage.appdatas.profile;$scope.user={};$scope.image=null;$scope.currentDate=new Date();$scope.mydate=$scope.currentDate;$scope.minDate1=$filter('date')($scope.currentDate,"yyyy,MM,dd");$scope.minDate=new Date($scope.minDate1);console.log("$scope.minDate",$scope.minDate);var numberOfDaysToAdd=280;$scope.newdate=$scope.mydate.setDate($scope.mydate.getDate()+numberOfDaysToAdd);$scope.maxDate1=$filter('date')($scope.newdate,"yyyy,MM,dd");$scope.maxDate=new Date($scope.maxDate1);console.log("$scope.maxDate",$scope.maxDate);console.log("$scope.minDate",$scope.minDate);$scope.datePickerCallback=function(val){if(!val){console.log('Date not selected')}else{console.log('Selected date is : ',val);$scope.user.dob=val}};$scope.datePickerCallback1=function(val){if(!val){console.log('Date not selected')}else{console.log('Selected date is : ',val);$scope.user.duedate=val}};$scope.profile=!0;$scope.info=!0;$scope.toggleLeftSideMenu=function(){$ionicSideMenuDelegate.toggleLeft()};$scope.infoedit=function(){$scope.info=!1}
$scope.profileedit=function(){$scope.profile=!1}
function toDate(dateString){var dateTokens=dateString.split('/');return new Date(dateTokens[2],parseInt(dateTokens[1])-1,dateTokens[0],0,0)}
$scope.takeimage=function(data){if(data=='camera'){var options={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0,correctOrientation:!0};$cordovaCamera.getPicture(options).then(function(imageData){console.log("imageData",imageData);var image='';image.src="data:image/jpeg;base64,"+imageData;$scope.image={};$scope.image.dataURL=image.src;$localStorage.proimage=image.src;console.log("$scope.image.dataURL",$scope.image.dataURL)},function(err){$cordovaToast.show($localStorage.appdatas.notificationdata.trylater,'long','center').then(function(success){},function(error){})})}
else{var options={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1,correctOrientation:!0};$cordovaCamera.getPicture(options).then(function(imageData){console.log("imageData",imageData);var image='';image.src="data:image/jpeg;base64,"+imageData;$scope.image={};$scope.image.dataURL=image.src;$localStorage.proimage=image.src;console.log("$scope.image.dataURL",$scope.image.dataURL)},function(err){$cordovaToast.show($localStorage.appdatas.notificationdata.trylater,'long','center').then(function(success){},function(error){})})}}
$scope.trimester=$localStorage.trimester;$scope.week=$localStorage.week;$scope.days=$localStorage.daysback;if($localStorage.guestfbid!=undefined){$ionicLoading.show();var ref=firebase.database().ref("/patients/"+$localStorage.guestfbid);var refdata=$firebaseObject(ref);refdata.$loaded().then(function(){$scope.user=refdata;$scope.user.duedate=toDate($scope.user.duedate);$scope.user.dob=toDate($scope.user.dob);console.log("profile",$scope.user);$ionicLoading.hide()})}
else{$cordovaToast.show($localStorage.appdatas.notificationdata.trylater,'long','center').then(function(success){},function(error){})}
$timeout(function(){$ionicLoading.hide()},5000);$scope.update=function(data,image){console.log("inside update");console.log("$localStorage.proimage",$localStorage.proimage);if($localStorage.guestfbid!=undefined){var ref=firebase.database().ref("/patients/"+$localStorage.guestfbid);console.log("$scope.image",$scope.image);console.log("$localStorage.proimage",$localStorage.proimage);if(image){$localStorage.guestdatanow.img=image.dataURL;ref.child('img').set(image.dataURL);$rootScope.img=image.dataURL}
if(data.name){$localStorage.guestdatanow.name=data.name;ref.child('name').set(data.name);$rootScope.name=data.name}
if(data.email){$localStorage.guestdatanow.email=data.email;ref.child('email').set(data.email)}
if(data.mobile){$localStorage.guestdatanow.mobile=data.mobile;ref.child('mobile').set(data.mobile)}
if(data.height){$localStorage.guestdatanow.height=data.height;ref.child('height').set(data.height)}
if(data.weight){$localStorage.guestdatanow.weight=data.weight;ref.child('weight').set(data.weight)}
if(data.dob){$localStorage.guestdatanow.dob=$filter('date')(data.dob,'dd/MM/yyyy');ref.child('dob').set($localStorage.guestdatanow.dob)}
if(data.duedate){if($localStorage.guestdatanow.duedate!=data.duedate){console.log("data.duedate",data.duedate);$scope.mydate=new Date(data.duedate);var numberOfDaysToAdd=280;$scope.newdate=$scope.mydate.setDate($scope.mydate.getDate()-numberOfDaysToAdd);console.log("$scope.newdate",$scope.newdate);var nowdate=$filter('date')($scope.newdate,'dd/MM/yyyy');console.log("nowdate",nowdate);$localStorage.guestdatanow.pregnancydate=nowdate;ref.child('pregnancydate').set($localStorage.guestdatanow.pregnancydate);data.duedate=$filter('date')(data.duedate,'dd/MM/yyyy');console.log("data.duedate",data.duedate);$localStorage.guestdatanow.duedate=data.duedate;ref.child('duedate').set($localStorage.guestdatanow.duedate)}
else{data.duedate=toDate(data.duedate);console.log("data.duedate",data.duedate);$scope.mydate=new Date(data.duedate);var numberOfDaysToAdd=280;$scope.newdate=$scope.mydate.setDate($scope.mydate.getDate()-numberOfDaysToAdd);console.log("$scope.newdate",$scope.newdate);var nowdate=$filter('date')($scope.newdate,'dd/MM/yyyy');console.log("nowdate",nowdate);$localStorage.guestdatanow.pregnancydate=nowdate;ref.child('pregnancydate').set($localStorage.guestdatanow.pregnancydate);data.duedate=$filter('date')(data.duedate,'dd/MM/yyyy');console.log("data.duedate",data.duedate);$localStorage.guestdatanow.duedate=data.duedate;ref.child('duedate').set($localStorage.guestdatanow.duedate)}}
$ionicPopup.alert({title:$localStorage.appdatas.notificationdata.success,template:$localStorage.appdatas.notificationdata.profileupdate,buttons:[{text:$localStorage.appdatas.notificationdata.ok,type:'button-positive',onTap:function(){$state.go("app.today")}}]})}
else{$cordovaToast.show($localStorage.appdatas.notificationdata.trylater,'long','center').then(function(success){},function(error){})}}}).controller('setreminderCtrl',function($scope,$ionicHistory,$window,$state,$ionicPopup,$ionicSideMenuDelegate,$firebaseObject,$firebaseArray,$stateParams,$localStorage,$ionicLoading,$interval,$filter){$scope.goback=function(){$ionicHistory.goBack()}
$scope.mealreminder=$localStorage.appdatas.reminder.meal;console.log("$scope.mealreminder",$scope.mealreminder);$scope.filter={};$scope.filter.breakfast=$localStorage.breakfast;$scope.filter.lunch=$localStorage.lunch;$scope.filter.dinner=$localStorage.dinner;$scope.filter.msnack=$localStorage.mornignsnack;$scope.filter.esnack=$localStorage.evenignsnack;$scope.time1=$localStorage.breakfasttime;$scope.time2=$localStorage.msnacktime;$scope.time3=$localStorage.lunchtime;$scope.time4=$localStorage.esnacktime;$scope.time5=$localStorage.dinnertime;document.getElementById("time1").value=$localStorage.breakfasttime;document.getElementById("time2").value=$localStorage.msnacktime;document.getElementById("time3").value=$localStorage.lunchtime;document.getElementById("time4").value=$localStorage.esnacktime;document.getElementById("time5").value=$localStorage.dinnertime;$scope.time5fun=function(data){if(data!=null){$localStorage.dinnertime=$filter('date')(data,'HH:mm');$scope.time5=$localStorage.dinnertime;document.getElementById("time5").value=$localStorage.dinnertime}}
$scope.time4fun=function(data){if(data!=null){$localStorage.esnacktime=$filter('date')(data,'HH:mm');$scope.time4=$localStorage.esnacktime;document.getElementById("time4").value=$localStorage.esnacktime}}
$scope.time3fun=function(data){if(data!=null){$localStorage.lunchtime=$filter('date')(data,'HH:mm');$scope.time3=$localStorage.lunchtime;document.getElementById("time3").value=$localStorage.lunchtime}}
$scope.time2fun=function(data){if(data!=null){$localStorage.msnacktime=$filter('date')(data,'HH:mm');$scope.time2=$localStorage.msnacktime;document.getElementById("time2").value=$localStorage.msnacktime}}
$scope.time1fun=function(data){if(data!=null){$localStorage.breakfasttime=$filter('date')(data,'HH:mm');$scope.time1=$localStorage.breakfasttime;document.getElementById("time1").value=$localStorage.breakfasttime}}
$scope.set=function(){$state.go("app.reminder")}
$scope.breakfastfun=function(data){if(data==!0){$localStorage.breakfast=!0;$scope.filter.breakfast=$localStorage.breakfast}
else{$localStorage.breakfast=!1;$scope.filter.breakfast=$localStorage.breakfast}}
$scope.lunchfun=function(data){if(data==!0){$localStorage.lunch=!0;$scope.filter.lunch=$localStorage.lunch}
else{$localStorage.lunch=!1;$scope.filter.lunch=$localStorage.lunch}}
$scope.dinnerfun=function(data){if(data==!0){$localStorage.dinner=!0;$scope.filter.dinner=$localStorage.dinner}
else{$localStorage.dinner=!1;$scope.filter.dinner=$localStorage.dinner}}
$scope.msnackfun=function(data){if(data==!0){$localStorage.mornignsnack=!0;$scope.filter.msnack=$localStorage.mornignsnack}
else{$localStorage.mornignsnack=!1;$scope.filter.msnack=$localStorage.mornignsnack}}
$scope.esnackfun=function(data){if(data==!0){$localStorage.evenignsnack=!0;$scope.filter.esnack=$localStorage.evenignsnack}
else{$localStorage.evenignsnack=!1;$scope.filter.esnack=$localStorage.evenignsnack}}}).controller('medicinereminderCtrl',function($scope,$ionicHistory,$window,$state,$ionicPopup,$ionicSideMenuDelegate,$firebaseObject,$firebaseArray,$stateParams,$localStorage,$ionicLoading,$interval,$filter){$scope.goback=function(){$ionicHistory.goBack()}
$scope.medicinereminder=$localStorage.appdatas.reminder.medicine;console.log("$scope.medicinereminder",$scope.medicinereminder);$scope.filter={};$scope.filter.morning=$localStorage.morning;$scope.filter.afternoon=$localStorage.afternoon;$scope.filter.evening=$localStorage.evening;$scope.filter.night=$localStorage.night;$scope.time1=$localStorage.morningmedicine;$scope.time2=$localStorage.afternoonmedicine;$scope.time3=$localStorage.eveningmedicine;$scope.time4=$localStorage.nightmedicine;document.getElementById("time1").value=$localStorage.morningmedicine;document.getElementById("time2").value=$localStorage.afternoonmedicine;document.getElementById("time3").value=$localStorage.eveningmedicine;document.getElementById("time4").value=$localStorage.nightmedicine;$scope.time1fun=function(data){if(data!=null){$localStorage.morningmedicine=$filter('date')(data,'HH:mm');$scope.time1=$localStorage.morningmedicine;document.getElementById("time1").value=$localStorage.morningmedicine}}
$scope.time2fun=function(data){if(data!=null){$localStorage.afternoonmedicine=$filter('date')(data,'HH:mm');$scope.time2=$localStorage.afternoonmedicine;document.getElementById("time2").value=$localStorage.afternoonmedicine}}
$scope.time3fun=function(data){if(data!=null){$localStorage.eveningmedicine=$filter('date')(data,'HH:mm');$scope.time3=$localStorage.eveningmedicine;document.getElementById("time3").value=$localStorage.eveningmedicine}}
$scope.time4fun=function(data){if(data!=null){$localStorage.nightmedicine=$filter('date')(data,'HH:mm');$scope.time4=$localStorage.nightmedicine;document.getElementById("time4").value=$localStorage.nightmedicine}}
$scope.set=function(){$state.go("app.reminder")}
$scope.morningfun=function(data){if(data==!0){$localStorage.morning=!0;$scope.filter.morning=$localStorage.morning}
else{$localStorage.morning=!1;$scope.filter.morning=$localStorage.morning}}
$scope.afternoonfun=function(data){if(data==!0){$localStorage.afternoon=!0;$scope.filter.afternoon=$localStorage.afternoon}
else{$localStorage.afternoon=!1;$scope.filter.afternoon=$localStorage.afternoon}}
$scope.eveningfun=function(data){if(data==!0){$localStorage.evening=!0;$scope.filter.evening=$localStorage.evening}
else{$localStorage.evening=!1;$scope.filter.evening=$localStorage.evening}}
$scope.nightfun=function(data){if(data==!0){$localStorage.night=!0;$scope.filter.night=$localStorage.night}
else{$localStorage.night=!1;$scope.filter.night=$localStorage.night}}}).controller('checkupreminderCtrl',function($scope,$ionicHistory,$window,$state,$ionicPopup,$ionicSideMenuDelegate,$firebaseObject,$firebaseArray,$stateParams,$localStorage,$ionicLoading,$interval,$filter){$scope.goback=function(){$ionicHistory.goBack()}
$scope.checkupreminder=$localStorage.appdatas.reminder.checkupreminder;console.log("$scope.checkupreminder",$scope.checkupreminder);console.log("inside checkupreminderCtrl");function toDate(dateString){var dateTokens=dateString.split('/');return new Date(dateTokens[2],parseInt(dateTokens[1])-1,dateTokens[0],0,0)}
$scope.checkupdate=toDate($localStorage.checkupdate);$scope.checkuptime=$localStorage.checkuptime;$scope.datefun=function(data){if(data!=null){console.log("data",data);$localStorage.checkupdate=$filter('date')(data,'dd/MM/yyyy');$scope.checkupdate=$localStorage.checkupdate}}
document.getElementById("time").value=$localStorage.checkuptime;$scope.time1fun=function(data){if(data!=null){$localStorage.checkuptime=$filter('date')(data,'HH:mm');$scope.checkuptime=$localStorage.checkuptime;document.getElementById("time").value=$localStorage.checkuptime}}
$scope.set=function(){$state.go("app.reminder")}}).controller('reminderCtrl',function($scope,$rootScope,$window,$state,$ionicPopup,$ionicSideMenuDelegate,$firebaseObject,$firebaseArray,$stateParams,$localStorage,$ionicLoading,$interval,$filter,$http){$scope.toggleLeftSideMenu=function(){$ionicSideMenuDelegate.toggleLeft()};if($localStorage.appdatas){$scope.menu=$localStorage.appdatas.menu;console.log("$rootScope.menu",$rootScope.menu);$scope.reminder=$localStorage.appdatas.reminder;console.log("$scope.reminder",$scope.reminder)}
if($localStorage.guestdatanow!=undefined){$rootScope.name=$localStorage.guestdatanow.name;if($localStorage.guestdatanow.img){$rootScope.img=$localStorage.guestdatanow.img}}
if($localStorage.firstremind==undefined){$localStorage.checkupremind=!0;$localStorage.medicineremind=!0;$localStorage.mealremind=!0;$localStorage.breakfast=!0;$localStorage.lunch=!0;$localStorage.dinner=!0;$localStorage.mornignsnack=!0;$localStorage.evenignsnack=!0;$localStorage.morning=!0;$localStorage.afternoon=!0;$localStorage.evening=!0;$localStorage.night=!0;var date=new Date();var today=$filter('date')(date,'dd/MM/yyyy');$localStorage.checkupdate=today;$localStorage.checkuptime="08:00";$localStorage.checkuptime2="08:00";$localStorage.morningmedicine="09:00";$localStorage.afternoonmedicine="13:00";$localStorage.eveningmedicine="17:00";$localStorage.nightmedicine="20:00";$localStorage.breakfasttime="09:30";$localStorage.lunchtime="12:30";$localStorage.dinnertime="20:00";$localStorage.msnacktime="10:30";$localStorage.esnacktime="16:30";$localStorage.firstremind=!0}
if($localStorage.allobabylogindata=="guest"){$scope.diffInDays=function(){var today=new Date();var date=$filter('date')(today,"dd/MM/yyyy");var dt1=date.split('/'),dt2=$localStorage.guestdatanow.duedate.split('/'),one=new Date(dt1[2],dt1[1],dt1[0]),two=new Date(dt2[2],dt2[1],dt2[0]);var millisecondsPerDay=1000*60*60*24;var millisBetween=two.getTime()-one.getTime();var days=millisBetween/millisecondsPerDay;return Math.floor(days)};$scope.difftest=$scope.diffInDays();console.log("Date diff bw duedate &  currentDate",$scope.difftest);console.log("date check",parseInt($scope.difftest)<0);if(parseInt($scope.difftest)<0){$scope.mydate=new Date();$scope.mydate1=new Date();console.log("mydata1",$scope.mydate1);$localStorage.guestdatanow.pregnancydate=$filter('date')($scope.mydate1,'dd/MM/yyyy');console.log(" $localStorage.guestdatanow.pregnancydate ",$localStorage.guestdatanow.pregnancydate);var numberOfDaysToAdd=280;$scope.newdate=$scope.mydate.setDate($scope.mydate.getDate()+numberOfDaysToAdd);console.log("$scope.newdate",$scope.newdate);var nowdate=$filter('date')($scope.newdate,'dd/MM/yyyy');$localStorage.guestdatanow.duedate=nowdate;console.log("pregnancydate, duedate ",$localStorage.guestdatanow.pregnancydate,$localStorage.guestdatanow.duedate);var pref=firebase.database().ref("/patientsdemo/"+$localStorage.guestfbid);pref.child("pregnancydate").set($localStorage.guestdatanow.pregnancydate);pref.child("duedate").set($localStorage.guestdatanow.duedate)}}
$scope.item={};$scope.item.checked2=$localStorage.medicineremind;$scope.item.checked3=$localStorage.checkupremind;$scope.item.checked1=$localStorage.mealremind;$scope.mealfun=function(data){if(data==!0){$localStorage.mealremind=!0;$scope.item.checked1=$localStorage.mealremind}
else{$localStorage.mealremind=!1;$scope.item.checked1=$localStorage.mealremind}}
$scope.gomeal=function(){$state.go("app.setreminder")}
$scope.medicinefun=function(data){if(data==!0){$localStorage.medicineremind=!0;$scope.item.checked2=$localStorage.medicineremind}
else{$localStorage.medicineremind=!1;$scope.item.checked2=$localStorage.medicineremind}}
$scope.gomedicine=function(){$state.go("app.medicinereminder")}
$scope.checkupfun=function(data){if(data==!0){$localStorage.checkupremind=!0;$scope.item.checked3=$localStorage.checkupremind}
else{$localStorage.checkupremind=!1;$scope.item.checked3=$localStorage.checkupremind}}
$scope.gocheckup=function(){$state.go("app.checkupreminder")}
$scope.setUpPushNotification=function(){document.addEventListener('deviceready',function(){cordova.plugins.notification.local.hasPermission(function(granted){if(granted==!1){cordova.plugins.notification.local.registerPermission(function(granted){console.log('registerPermission has been granted: '+granted)})}})},!1)};if($localStorage.mealremind==!0){$interval(function(){$scope.schedulePush2()},60000)}
if($localStorage.medicineremind==!0){$interval(function(){$scope.schedulePush1()},60000)}
if($localStorage.checkupremind==!0){$interval(function(){$scope.schedulePush()},60000)}
$scope.setUpPushNotification();$scope.schedulePush=function(){var today1=new Date();var today=$filter('date')(today1,"HH:mm");var today2=new Date();var date=$filter('date')(today2,"dd/MM/yyyy");console.log("today",today);$scope.diffInDays=function(){var today=new Date();var date=$filter('date')(today,"dd/MM/yyyy");var dt1=date.split('/'),dt2=$localStorage.checkupdate.split('/'),one=new Date(dt1[2],dt1[1],dt1[0]),two=new Date(dt2[2],dt2[1],dt2[0]);var millisecondsPerDay=1000*60*60*24;var millisBetween=two.getTime()-one.getTime();var days=millisBetween/millisecondsPerDay;return Math.floor(days)};$scope.difftest=$scope.diffInDays();if($scope.difftest===1&&today==$localStorage.checkuptime){var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.checkupalert,text:$localStorage.appdatas.notificationdata.tomorrowcheckup,at:startProcessTime,sound:"file://test.mp3",icon:"file://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}
if(date==$localStorage.checkupdate&&today==$localStorage.checkuptime2){console.log("date & time matched");var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.checkupalert,text:$localStorage.appdatas.notificationdata.todaycheckup,at:startProcessTime,sound:"file://test.mp3",icon:"file://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}
$scope.schedulePush1=function(){var today1=new Date();var time=$filter('date')(today1,"HH:mm");if(time==$localStorage.morningmedicine){if($localStorage.mornign==!0){console.log("inside");var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.medicinetitle,text:$localStorage.appdatas.notificationdata.medicinedescription,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}
else if(time==$localStorage.afternoonmedicine){if($localStorage.afternoon==!0){var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.medicinetitle,text:$localStorage.appdatas.notificationdata.medicinedescription,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}
else if(time==$localStorage.eveningmedicine){if($localStorage.evening==!0){var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.medicinetitle,text:$localStorage.appdatas.notificationdata.medicinedescription,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}
else if(time==$localStorage.nightmedicine){if($localStorage.night==!0){var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.medicinetitle,text:$localStorage.appdatas.notificationdata.medicinedescription,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}}
$scope.schedulePush2=function(){var today1=new Date();var time=$filter('date')(today1,"HH:mm");if(time==$localStorage.breakfasttime){if($localStorage.breakfast==!0){console.log("inside");var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.mealtitle,text:$localStorage.appdatas.notificationdata.breakfast,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}
else if(time==$localStorage.msnacktime){if($localStorage.mornignsnack==!0){var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.mealtitle,text:$localStorage.appdatas.notificationdata.mornignsnack,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}
else if(time==$localStorage.lunchtime){if($localStorage.lunch==!0){var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.mealtitle,text:$localStorage.appdatas.notificationdata.lunch,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}
else if(time==$localStorage.esnacktime){if($localStorage.evenignsnack==!0){var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.mealtitle,text:$localStorage.appdatas.notificationdata.evenignsnack,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}
else if(time==$localStorage.dinnertime){if($localStorage.dinner==!0){var now=new Date().getTime();var startProcessTime=new Date(now+1*1000);try{document.addEventListener('deviceready',function(){cordova.plugins.notification.local.schedule({id:1,title:$localStorage.appdatas.notificationdata.mealtitle,text:$localStorage.appdatas.notificationdata.dinner,at:startProcessTime,sound:"file://test.mp3",icon:"res://logo_notification.jpg"})},!1)}
catch(e){console.log("error",e)}}}}}).controller('testCtrl',function($localStorage,$http,$scope,$ionicLoading,$firebaseArray,$interval,$ionicHistory,$ionicSideMenuDelegate,$timeout,$window,$firebaseObject){$scope.test=$localStorage.appdatas.test;console.log("$scope.test",$scope.test);$scope.Height=$window.innerHeight-30;$scope.goback=function(){$ionicHistory.goBack()}
$scope.tridata=[];$scope.tridata2=[];$scope.tridata3=[];if(!$localStorage.trimesterdata){console.log("inside english");$http.get("datas/trimester.json").then(function(res){console.log("res data ",res.data);$localStorage.trimesterdata=res.data;$localStorage.trimesterstatus=!0;console.log("tridatas from localStorage ",$localStorage.trimesterdata);for(var i=0;i<$localStorage.trimesterdata.length;i++){console.log("check trimester ",$localStorage.trimesterdata[i].trimester,$localStorage.trimester);if($localStorage.trimesterdata[i].trimester==1){$scope.tridata.push($localStorage.trimesterdata[i]);console.log("current week info",$scope.tridata)}
else if($localStorage.trimesterdata[i].trimester==2){$scope.tridata2.push($localStorage.trimesterdata[i]);console.log("current week info",$scope.tridata2)}
else{$scope.tridata3.push($localStorage.trimesterdata[i]);console.log("current week info",$scope.tridata3)}}})}
else{console.log("tridatas from localStorage ",$localStorage.trimesterdata);for(var i=0;i<$localStorage.trimesterdata.length;i++){console.log("check trimester ",$localStorage.trimesterdata[i].trimester,$localStorage.trimester);if($localStorage.trimesterdata[i].trimester==1){$scope.tridata.push($localStorage.trimesterdata[i]);console.log("current trimester info",$scope.tridata)}
else if($localStorage.trimesterdata[i].trimester==2){$scope.tridata2.push($localStorage.trimesterdata[i]);console.log("current week info",$scope.tridata2)}
else{$scope.tridata3.push($localStorage.trimesterdata[i]);console.log("current week info",$scope.tridata3)}}}}).directive('file',['$localStorage','$rootScope','$ionicPopup',function($localStorage,$rootScope,$ionicPopup){return{require:"ngModel",restrict:'A',link:function($scope,el,attrs,ngModel){el.bind('change',function(event){var files=event.target.files;var file=files[0];console.log('file',file);if(file.type=="image/jpeg"||file.type=="image/jpg"||file.type=="image/png"||file.type=="image/gif"||file.type=="image/bmp"){var uploader=document.getElementById('uploader');var fileButton=document.getElementById('fileButton');var storageRef=firebase.storage().ref('scanreports/'+file.name);var task=storageRef.put(file);task.on('state_changed',function progress(snapshot){console.log(snapshot);var percentage=(snapshot.bytesTransferred/snapshot.totalBytes)*100;uploader.value=percentage},function error(err){},function complete(){storageRef.getDownloadURL().then(function(url){$localStorage.downloadURL=url;$rootScope.disable=!1}).catch(function(error){})});ngModel.$setViewValue(file);$scope.$apply()}
else{$ionicPopup.alert({title:$localStorage.appdatas.notificationdata.alert,template:$localStorage.appdatas.notificationdata.filesupport,buttons:[{text:$localStorage.appdatas.notificationdata.ok,type:'button-positive',onTap:function(){document.getElementById("fileButton").value=null}}]})}})}}}]).filter('null',function(){return function(value){if(value===null||value===undefined){return"<null>"}
return value}}).directive('imageSetAspect',function(){return{scope:!1,restrict:'A',link:function(scope,element,attrs){element.bind('load',function(){scope.$apply(function(){scope.imageMeta.width=$(element).width();scope.imageMeta.height=$(element).height();console.log(scope.$parent.imageMeta)})})}}}).directive('image',function($q){'use strict'
var URL=window.URL||window.webkitURL;var getResizeArea=function(){var resizeAreaId='fileupload-resize-area';var resizeArea=document.getElementById(resizeAreaId);if(!resizeArea){resizeArea=document.createElement('canvas');resizeArea.id=resizeAreaId;resizeArea.style.visibility='hidden';document.body.appendChild(resizeArea)}
return resizeArea}
var resizeImage=function(origImage,options){var maxHeight=options.resizeMaxHeight||300;var maxWidth=options.resizeMaxWidth||250;var quality=options.resizeQuality||0.7;var type=options.resizeType||'image/jpg';var canvas=getResizeArea();var height=origImage.height;var width=origImage.width;if(width>height){if(width>maxWidth){height=Math.round(height*=maxWidth/width);width=maxWidth}}else{if(height>maxHeight){width=Math.round(width*=maxHeight/height);height=maxHeight}}
canvas.width=width;canvas.height=height;var ctx=canvas.getContext("2d");ctx.drawImage(origImage,0,0,width,height);return canvas.toDataURL(type,quality)};var createImage=function(url,callback){var image=new Image();image.onload=function(){callback(image)};image.src=url};var fileToDataURL=function(file){var deferred=$q.defer();var reader=new FileReader();reader.onload=function(e){deferred.resolve(e.target.result)};reader.readAsDataURL(file);return deferred.promise};return{restrict:'A',scope:{image:'=',resizeMaxHeight:'@?',resizeMaxWidth:'@?',resizeQuality:'@?',resizeType:'@?',},link:function postLink(scope,element,attrs,ctrl){var doResizing=function(imageResult,callback){createImage(imageResult.url,function(image){var dataURL=resizeImage(image,scope);imageResult.resized={dataURL:dataURL,type:dataURL.match(/:(.+\/.+);/)[1],};callback(imageResult)})};var applyScope=function(imageResult){scope.$apply(function(){if(attrs.multiple)
scope.image.push(imageResult);else scope.image=imageResult})};element.bind('change',function(evt){if(attrs.multiple)
scope.image=[];var files=evt.target.files;for(var i=0;i<files.length;i++){var imageResult={file:files[i],url:URL.createObjectURL(files[i])};fileToDataURL(files[i]).then(function(dataURL){imageResult.dataURL=dataURL});if(scope.resizeMaxHeight||scope.resizeMaxWidth){doResizing(imageResult,function(imageResult){applyScope(imageResult)})}
else{applyScope(imageResult)}}})}}}).filter('reverse',function(){return function(items){return items.slice().reverse()}}).filter('nl2br',['$filter',function($filter){return function(data){if(!data)return data;return data.replace(/\n\r?/g,'<br />')}}]).directive('autolinker',['$timeout',function($timeout){return{restrict:'A',link:function(scope,element,attrs){$timeout(function(){var eleHtml=element.html();if(eleHtml===''){return!1}
var text=Autolinker.link(eleHtml,{className:'autolinker',newWindow:!1});element.html(text);var autolinks=element[0].getElementsByClassName('autolinker');for(var i=0;i<autolinks.length;i++){angular.element(autolinks[i]).bind('click',function(e){var href=e.target.href;console.log('autolinkClick, href: '+href);if(href){window.open(href,'_blank')}
e.preventDefault();return!1})}},0)}}}]).constant('msdElasticConfig',{append:''}).directive('msdElastic',['$timeout','$window','msdElasticConfig',function($timeout,$window,config){'use strict';return{require:'ngModel',restrict:'A, C',link:function(scope,element,attrs,ngModel){var ta=element[0],$ta=element;if(ta.nodeName!=='TEXTAREA'||!$window.getComputedStyle){return}
$ta.css({'overflow':'hidden','overflow-y':'hidden','word-wrap':'break-word'});var text=ta.value;ta.value='';ta.value=text;var append=attrs.msdElastic?attrs.msdElastic.replace(/\\n/g,'\n'):config.append,$win=angular.element($window),mirrorInitStyle='position: absolute; top: -999px; right: auto; bottom: auto;'+'left: 0; overflow: hidden; -webkit-box-sizing: content-box;'+'-moz-box-sizing: content-box; box-sizing: content-box;'+'min-height: 0 !important; height: 0 !important; padding: 0;'+'word-wrap: break-word; border: 0;',$mirror=angular.element('<textarea tabindex="-1" '+'style="'+mirrorInitStyle+'"/>').data('elastic',!0),mirror=$mirror[0],taStyle=getComputedStyle(ta),resize=taStyle.getPropertyValue('resize'),borderBox=taStyle.getPropertyValue('box-sizing')==='border-box'||taStyle.getPropertyValue('-moz-box-sizing')==='border-box'||taStyle.getPropertyValue('-webkit-box-sizing')==='border-box',boxOuter=!borderBox?{width:0,height:0}:{width:parseInt(taStyle.getPropertyValue('border-right-width'),10)+parseInt(taStyle.getPropertyValue('padding-right'),10)+parseInt(taStyle.getPropertyValue('padding-left'),10)+parseInt(taStyle.getPropertyValue('border-left-width'),10),height:parseInt(taStyle.getPropertyValue('border-top-width'),10)+parseInt(taStyle.getPropertyValue('padding-top'),10)+parseInt(taStyle.getPropertyValue('padding-bottom'),10)+parseInt(taStyle.getPropertyValue('border-bottom-width'),10)},minHeightValue=parseInt(taStyle.getPropertyValue('min-height'),10),heightValue=parseInt(taStyle.getPropertyValue('height'),10),minHeight=Math.max(minHeightValue,heightValue)-boxOuter.height,maxHeight=parseInt(taStyle.getPropertyValue('max-height'),10),mirrored,active,copyStyle=['font-family','font-size','font-weight','font-style','letter-spacing','line-height','text-transform','word-spacing','text-indent'];if($ta.data('elastic')){return}
maxHeight=maxHeight&&maxHeight>0?maxHeight:9e4;if(mirror.parentNode!==document.body){angular.element(document.body).append(mirror)}
$ta.css({'resize':(resize==='none'||resize==='vertical')?'none':'horizontal'}).data('elastic',!0);function initMirror(){var mirrorStyle=mirrorInitStyle;mirrored=ta;taStyle=getComputedStyle(ta);angular.forEach(copyStyle,function(val){mirrorStyle+=val+':'+taStyle.getPropertyValue(val)+';'});mirror.setAttribute('style',mirrorStyle)}
function adjust(){var taHeight,taComputedStyleWidth,mirrorHeight,width,overflow;if(mirrored!==ta){initMirror()}
if(!active){active=!0;mirror.value=ta.value+append;mirror.style.overflowY=ta.style.overflowY;taHeight=ta.style.height===''?'auto':parseInt(ta.style.height,10);taComputedStyleWidth=getComputedStyle(ta).getPropertyValue('width');if(taComputedStyleWidth.substr(taComputedStyleWidth.length-2,2)==='px'){width=parseInt(taComputedStyleWidth,10)-boxOuter.width;mirror.style.width=width+'px'}
mirrorHeight=mirror.scrollHeight;if(mirrorHeight>maxHeight){mirrorHeight=maxHeight;overflow='scroll'}else if(mirrorHeight<minHeight){mirrorHeight=minHeight}
mirrorHeight+=boxOuter.height;ta.style.overflowY=overflow||'hidden';if(taHeight!==mirrorHeight){ta.style.height=mirrorHeight+'px';scope.$emit('elastic:resize',$ta)}
scope.$emit('taResize',$ta);$timeout(function(){active=!1},1)}}
function forceAdjust(){active=!1;adjust()}
if('onpropertychange' in ta&&'oninput' in ta){ta.oninput=ta.onkeyup=adjust}else{ta.oninput=adjust}
$win.bind('resize',forceAdjust);scope.$watch(function(){return ngModel.$modelValue},function(newValue){forceAdjust()});scope.$on('elastic:adjust',function(){initMirror();forceAdjust()});$timeout(adjust);scope.$on('$destroy',function(){$mirror.remove();$win.unbind('resize',forceAdjust)})}}}])
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.Autolinker=b()}(this,function(){var a=function(b){a.Util.assign(this,b),this.matchValidator=new a.MatchValidator};return a.prototype={constructor:a,urls:!0,email:!0,twitter:!0,newWindow:!0,stripPrefix:!0,className:"",htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;)/gi,matcherRegex:function(){var a=/(^|[^\w])@(\w{1,15})/,b=/(?:[\-;:&=\+\$,\w\.]+@)/,c=/(?:[A-Za-z][-.+A-Za-z0-9]+:(?![A-Za-z][-.+A-Za-z0-9]+:\/\/)(?!\d+\/?)(?:\/\/)?)/,d=/(?:www\.)/,e=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,f=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,g=/[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]?!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]]/;return new RegExp(["(",a.source,")","|","(",b.source,e.source,f.source,")","|","(","(?:","(",c.source,e.source,")","|","(?:","(.?//)?",d.source,e.source,")","|","(?:","(.?//)?",e.source,f.source,")",")","(?:"+g.source+")?",")"].join(""),"gi")}(),charBeforeProtocolRelMatchRegex:/^(.)?\/\//,link:function(b){var c=this,d=this.getHtmlParser(),e=this.htmlCharacterEntitiesRegex,f=0,g=[];return d.parse(b,{processHtmlNode:function(a,b,c){"a"===b&&(c?f=Math.max(f-1,0):f++),g.push(a)},processTextNode:function(b){if(0===f)for(var d=a.Util.splitAndCapture(b,e),h=0,i=d.length;i>h;h++){var j=d[h],k=c.processTextNode(j);g.push(k)}else g.push(b)}}),g.join("")},getHtmlParser:function(){var b=this.htmlParser;return b||(b=this.htmlParser=new a.HtmlParser),b},getTagBuilder:function(){var b=this.tagBuilder;return b||(b=this.tagBuilder=new a.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),b},processTextNode:function(a){var b=this;return a.replace(this.matcherRegex,function(a,c,d,e,f,g,h,i,j){var k=b.processCandidateMatch(a,c,d,e,f,g,h,i,j);if(k){var l=b.createMatchReturnVal(k.match,k.matchStr);return k.prefixStr+l+k.suffixStr}return a})},processCandidateMatch:function(b,c,d,e,f,g,h,i,j){var k,l=i||j,m="",n="";if(c&&!this.twitter||f&&!this.email||g&&!this.urls||!this.matchValidator.isValidMatch(g,h,l))return null;if(this.matchHasUnbalancedClosingParen(b)&&(b=b.substr(0,b.length-1),n=")"),f)k=new a.match.Email({matchedText:b,email:f});else if(c)d&&(m=d,b=b.slice(1)),k=new a.match.Twitter({matchedText:b,twitterHandle:e});else{if(l){var o=l.match(this.charBeforeProtocolRelMatchRegex)[1]||"";o&&(m=o,b=b.slice(1))}k=new a.match.Url({matchedText:b,url:b,protocolUrlMatch:!!h,protocolRelativeMatch:!!l,stripPrefix:this.stripPrefix})}return{prefixStr:m,suffixStr:n,matchStr:b,match:k}},matchHasUnbalancedClosingParen:function(a){var b=a.charAt(a.length-1);if(")"===b){var c=a.match(/\(/g),d=a.match(/\)/g),e=c&&c.length||0,f=d&&d.length||0;if(f>e)return!0}return!1},createMatchReturnVal:function(b,c){var d;if(this.replaceFn&&(d=this.replaceFn.call(this,this,b)),"string"==typeof d)return d;if(d===!1)return c;if(d instanceof a.HtmlTag)return d.toString();var e=this.getTagBuilder(),f=e.build(b);return f.toString()}},a.link=function(b,c){var d=new a(c);return d.link(b)},a.match={},a.Util={abstractMethod:function(){throw"abstract"},assign:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},extend:function(b,c){var d=b.prototype,e=function(){};e.prototype=d;var f;f=c.hasOwnProperty("constructor")?c.constructor:function(){d.constructor.apply(this,arguments)};var g=f.prototype=new e;return g.constructor=f,g.superclass=d,delete c.constructor,a.Util.assign(g,c),f},ellipsis:function(a,b,c){return a.length>b&&(c=null==c?"..":c,a=a.substring(0,b-c.length)+c),a},indexOf:function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},splitAndCapture:function(a,b){if(!b.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var c,d=[],e=0;c=b.exec(a);)d.push(a.substring(e,c.index)),d.push(c[0]),e=c.index+c[0].length;return d.push(a.substring(e)),d}},a.HtmlParser=a.Util.extend(Object,{htmlRegex:function(){var a=/[0-9a-zA-Z][0-9a-zA-Z:]*/,b=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,c=/(?:".*?"|'.*?'|[^'"=<>`\s]+)/,d=b.source+"(?:\\s*=\\s*"+c.source+")?";return new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",d,"|",c.source+")",")*",">",")","|","(?:","<(/)?","("+a.source+")","(?:","\\s+",d,")*","\\s*/?",">",")"].join(""),"gi")}(),parse:function(a,b){b=b||{};for(var c,d=b.processHtmlNode||function(){},e=b.processTextNode||function(){},f=this.htmlRegex,g=0;null!==(c=f.exec(a));){var h=c[0],i=c[1]||c[3],j=!!c[2],k=a.substring(g,c.index);k&&e(k),d(h,i.toLowerCase(),j),g=c.index+h.length}if(g<a.length){var l=a.substring(g);l&&e(l)}}}),a.HtmlTag=a.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(b){a.Util.assign(this,b),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(a){return this.tagName=a,this},getTagName:function(){return this.tagName||""},setAttr:function(a,b){var c=this.getAttrs();return c[a]=b,this},getAttr:function(a){return this.getAttrs()[a]},setAttrs:function(b){var c=this.getAttrs();return a.Util.assign(c,b),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(a){return this.setAttr("class",a)},addClass:function(b){for(var c,d=this.getClass(),e=this.whitespaceRegex,f=a.Util.indexOf,g=d?d.split(e):[],h=b.split(e);c=h.shift();)-1===f(g,c)&&g.push(c);return this.getAttrs()["class"]=g.join(" "),this},removeClass:function(b){for(var c,d=this.getClass(),e=this.whitespaceRegex,f=a.Util.indexOf,g=d?d.split(e):[],h=b.split(e);g.length&&(c=h.shift());){var i=f(g,c);-1!==i&&g.splice(i,1)}return this.getAttrs()["class"]=g.join(" "),this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(a){return-1!==(" "+this.getClass()+" ").indexOf(" "+a+" ")},setInnerHtml:function(a){return this.innerHtml=a,this},getInnerHtml:function(){return this.innerHtml||""},toString:function(){var a=this.getTagName(),b=this.buildAttrsStr();return b=b?" "+b:"",["<",a,b,">",this.getInnerHtml(),"</",a,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var a=this.getAttrs(),b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+'="'+a[c]+'"');return b.join(" ")}}),a.MatchValidator=a.Util.extend(Object,{invalidProtocolRelMatchRegex:/^[\w]\/\//,hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]+:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]+:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z]/,isValidMatch:function(a,b,c){return b&&!this.isValidUriScheme(b)||this.urlMatchDoesNotHaveProtocolOrDot(a,b)||this.urlMatchDoesNotHaveAtLeastOneWordChar(a,b)||this.isInvalidProtocolRelativeMatch(c)?!1:!0},isValidUriScheme:function(a){var b=a.match(this.uriSchemeRegex)[0];return"javascript:"!==b&&"vbscript:"!==b},urlMatchDoesNotHaveProtocolOrDot:function(a,b){return!(!a||b&&this.hasFullProtocolRegex.test(b)||-1!==a.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(a,b){return a&&b?!this.hasWordCharAfterProtocolRegex.test(a):!1},isInvalidProtocolRelativeMatch:function(a){return!!a&&this.invalidProtocolRelMatchRegex.test(a)}}),a.AnchorTagBuilder=a.Util.extend(Object,{constructor:function(b){a.Util.assign(this,b)},build:function(b){var c=new a.HtmlTag({tagName:"a",attrs:this.createAttrs(b.getType(),b.getAnchorHref()),innerHtml:this.processAnchorText(b.getAnchorText())});return c},createAttrs:function(a,b){var c={href:b},d=this.createCssClass(a);return d&&(c["class"]=d),this.newWindow&&(c.target="_blank"),c},createCssClass:function(a){var b=this.className;return b?b+" "+b+"-"+a:""},processAnchorText:function(a){return a=this.doTruncate(a)},doTruncate:function(b){return a.Util.ellipsis(b,this.truncate||Number.POSITIVE_INFINITY)}}),a.match.Match=a.Util.extend(Object,{constructor:function(b){a.Util.assign(this,b)},getType:a.Util.abstractMethod,getMatchedText:function(){return this.matchedText},getAnchorHref:a.Util.abstractMethod,getAnchorText:a.Util.abstractMethod}),a.match.Email=a.Util.extend(a.match.Match,{getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),a.match.Twitter=a.Util.extend(a.match.Match,{getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}}),a.match.Url=a.Util.extend(a.match.Match,{urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrl:function(){var a=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(a=this.url="http://"+a,this.protocolPrepended=!0),a},getAnchorHref:function(){var a=this.getUrl();return a.replace(/&amp;/g,"&")},getAnchorText:function(){var a=this.getUrl();return this.protocolRelativeMatch&&(a=this.stripProtocolRelativePrefix(a)),this.stripPrefix&&(a=this.stripUrlPrefix(a)),a=this.removeTrailingSlash(a)},stripUrlPrefix:function(a){return a.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(a){return a.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(a){return"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1)),a}}),a})